# Generic Document Template Configuration
# This file defines the configuration options and metadata requirements for the generic template

# =============================================================================
# Required Metadata Fields
# =============================================================================
# These fields must be defined when instantiating a new document from this template

metadata:
  # Unique identifier for the document (e.g., DOC-PROJ-001)
  document-id:
    type: string
    required: true
    description: "Unique document identifier following project naming conventions"
    pattern: "^[A-Z]{3,5}-[A-Z0-9]+-[0-9]{3,5}$"
    example: "DOC-PROJ-001"

  # Name of the project this document belongs to
  project-name:
    type: string
    required: true
    description: "Official project name"
    example: "Project Phoenix"

  # Primary author of the document
  author:
    type: string
    required: true
    description: "Primary author name or team"
    example: "Documentation Team"

  # Security classification level
  classification:
    type: string
    required: true
    description: "Document security classification"
    allowed-values:
      - "Public"
      - "Internal"
      - "Confidential"
      - "Restricted"
      - "Secret"
      - "Top Secret"
    default: "Internal"
    example: "Internal"

  # Additional optional metadata
  distribution:
    type: string
    required: false
    description: "Distribution statement or restrictions"
    example: "For internal use only"

  contract-number:
    type: string
    required: false
    description: "Contract or purchase order number"
    example: "PO-2023-12345"

  organization:
    type: string
    required: false
    description: "Organization or company name"
    example: "Example Corporation"

  revision:
    type: string
    required: false
    description: "Document revision number"
    default: "1.0"
    pattern: "^[0-9]+\\.[0-9]+$"
    example: "1.0"

  # Generic document-specific metadata
  document-type:
    type: string
    required: false
    description: "Type of document being created"
    examples:
      - "User Manual"
      - "Technical Specification"
      - "Requirements Document"
      - "Design Document"
      - "Test Plan"
      - "Operations Manual"
      - "Installation Guide"
      - "API Documentation"
    default: "Documentation"

  audience:
    type: string
    required: false
    description: "Intended audience for the document"
    examples:
      - "Developers"
      - "End Users"
      - "System Administrators"
      - "Management"
      - "All Stakeholders"

# =============================================================================
# Build Options
# =============================================================================
# Configuration for document generation and compilation

build:
  # Output formats to generate
  output-formats:
    - format: pdf
      enabled: true
      description: "Generate PDF output using asciidoctor-pdf"
      
    - format: html
      enabled: true
      description: "Generate HTML output using asciidoctor"
      
    - format: docbook
      enabled: false
      description: "Generate DocBook XML output"
      
    - format: markdown
      enabled: false
      description: "Generate Markdown output"

  # Theme configuration
  theme:
    # PDF theme file (relative to project root)
    pdf-theme: "themes/pdf/ecss-default-theme.yml"
    pdf-theme-alt: "themes/pdf/ecss-alt-theme.yml"
    
    # HTML stylesheet (relative to project root)
    html-stylesheet: "themes/html/ecss-default.css"
    html-stylesheet-alt: "themes/html/ecss-alt.css"
    
    # Allow theme customization per document
    customizable: true
    
    # Support for custom themes
    custom-theme-path: "themes/custom"

  # Custom AsciiDoc attributes
  custom-attributes:
    # Document structure attributes
    doctype: book
    toc: left
    toclevels: 3
    sectnums: true
    sectnumlevels: 4
    
    # Visual attributes
    icons: font
    figure-caption: "Figure"
    table-caption: "Table"
    appendix-caption: "Appendix"
    chapter-label: ""
    xrefstyle: short
    
    # Source code highlighting
    source-highlighter: rouge
    
    # Experimental features
    experimental: true
    
    # Diagram support
    diagram-support: true
    diagram-cachedir: ".asciidoctor/diagram"
    diagram-svg-type: inline
    
    # Images directory
    imagesdir: "images"
    
    # Generic document attributes
    document-type: "Documentation"

  # Diagram rendering options
  diagrams:
    enabled: true
    formats:
      - plantuml
      - graphviz
      - ditaa
      - mermaid
      - blockdiag
      - seqdiag
      - actdiag
      - nwdiag
    java-required: false
    graphviz-required: false
    optional-formats: true

  # Validation options
  validation:
    # Run syntax validation before build
    validate-syntax: true
    
    # Run structure validation
    validate-structure: false
    
    # Check for broken cross-references
    check-xrefs: true
    
    # Flexible section requirements for generic documents
    required-sections:
      - "Revision History"
      - "Introduction"
    
    # Optional sections (warnings if missing)
    recommended-sections:
      - "Applicable Documents"
      - "Terms, Definitions and Abbreviations"
      - "Conclusion"

  # Build artifacts
  artifacts:
    # Output directory (relative to project root)
    output-dir: "build"
    
    # Log directory
    log-dir: "build/logs"
    
    # Keep intermediate files
    keep-artifacts: false
    
    # Generate TOC as separate file
    generate-toc: false
    
    # Generate index
    generate-index: false

# =============================================================================
# CI/CD Configuration
# =============================================================================
# Settings for continuous integration and deployment

ci-cd:
  # Artifact retention policy
  artifact-retention:
    # Number of days to retain build artifacts
    retention-days: 60
    
    # Retain artifacts from tagged releases indefinitely
    retain-releases: true
    
    # Maximum number of artifacts to keep
    max-artifacts: 30

  # Deployment targets
  deployment-targets:
    # Development environment
    - name: development
      enabled: true
      description: "Development document server"
      auto-deploy: true
      branches:
        - develop
        - feature/*
        - docs/*
      url: "https://docs-dev.example.com"
      
    # Staging environment
    - name: staging
      enabled: true
      description: "Staging document server for review"
      auto-deploy: true
      branches:
        - main
        - release/*
      url: "https://docs-staging.example.com"
      requires-approval: false
      
    # Production environment
    - name: production
      enabled: true
      description: "Production document repository"
      auto-deploy: false
      branches:
        - main
      tags:
        - v*
        - release-*
      url: "https://docs.example.com"
      requires-approval: true
      approvers:
        - "documentation-lead"
        - "project-manager"
        
    # Public documentation site
    - name: public
      enabled: false
      description: "Public-facing documentation site"
      auto-deploy: false
      branches:
        - main
      url: "https://public-docs.example.com"
      requires-approval: true
      classification-required: "Public"

  # Build triggers
  triggers:
    # Build on push to these branches
    push-branches:
      - main
      - develop
      - release/*
      - feature/*
      - docs/*
    
    # Build on pull requests to these branches
    pull-request-branches:
      - main
      - develop
    
    # Build on tag creation
    tags: true
    
    # Schedule periodic builds
    schedule:
      enabled: false
      cron: "0 1 * * *"  # Daily at 1 AM

  # Notification settings
  notifications:
    # Notify on build status
    on-success: true
    on-failure: true
    
    # Notification channels
    channels:
      - type: email
        enabled: true
        recipients:
          - "docs-team@example.com"
          
      - type: slack
        enabled: false
        webhook-url: "${SLACK_WEBHOOK_URL}"
        channel: "#documentation"
        
      - type: teams
        enabled: false
        webhook-url: "${TEAMS_WEBHOOK_URL}"
        
      - type: discord
        enabled: false
        webhook-url: "${DISCORD_WEBHOOK_URL}"

  # Quality gates
  quality-gates:
    # Fail build if validation errors occur
    fail-on-validation-error: false
    
    # Fail build if warnings exceed threshold
    fail-on-warnings: false
    max-warnings: 20
    
    # Require all cross-references to be valid
    require-valid-xrefs: false
    
    # Spell checking
    spell-check: false
    language: "en-US"

  # Pipeline stages
  pipeline:
    stages:
      - name: validate
        description: "Validate document syntax"
        commands:
          - "bundle exec make verify"
          
      - name: build
        description: "Build document outputs"
        commands:
          - "bundle exec make all"
          
      - name: test
        description: "Run document tests"
        enabled: false
        commands:
          - "./scripts/test-doc.sh"
          
      - name: lint
        description: "Lint documentation"
        enabled: false
        commands:
          - "./scripts/lint-doc.sh"
          
      - name: package
        description: "Package artifacts for deployment"
        commands:
          - "tar -czf doc-artifacts.tar.gz build/"
          
      - name: deploy
        description: "Deploy to target environment"
        enabled: true
        manual: false

  # Additional integrations
  integrations:
    # Git repository integration
    git:
      auto-commit: false
      commit-message: "docs: Update generated documentation [skip ci]"
      
    # Documentation portals
    portals:
      - name: confluence
        enabled: false
        url: "${CONFLUENCE_URL}"
        space-key: "DOCS"
        
      - name: readthedocs
        enabled: false
        project: "example-project"
        
      - name: github-pages
        enabled: false
        branch: "gh-pages"

# =============================================================================
# Template Metadata
# =============================================================================
# Information about this template

template:
  name: "Generic Document Template"
  version: "2.0"
  description: "Flexible generic document template suitable for various documentation types"
  
  maintainer:
    name: "Documentation Team"
    email: "docs@example.com"
  
  # Template file reference
  source-file: "generic-template.adoc"
  
  # Required dependencies
  dependencies:
    asciidoctor: "~> 2.0"
    asciidoctor-pdf: "~> 2.3"
    asciidoctor-diagram: "~> 2.2"
    
  # Optional dependencies
  optional-dependencies:
    plantuml: "latest"
    graphviz: "latest"
    
  # Standards compliance
  standards:
    - "AsciiDoc Best Practices"
    - "Documentation Style Guide"
  
  # Suitable for document types
  suitable-for:
    - "Technical Documentation"
    - "User Guides"
    - "Requirements Documents"
    - "Design Documents"
    - "Test Plans"
    - "Operations Manuals"
    - "Installation Guides"
    - "API Documentation"
    - "White Papers"
    - "Technical Reports"
  
  last-updated: "2024-01-15"
  
  # Customization notes
  notes: |
    This is a flexible template that can be adapted for various document types.
    Customize the metadata fields and build options according to your specific needs.
    The template provides minimal structural requirements to allow maximum flexibility.
